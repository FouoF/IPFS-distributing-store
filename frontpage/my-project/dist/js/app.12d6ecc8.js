(function(){"use strict";var e={480:function(e,n,l){var o=l(5130),t=l(6768);const a={id:"app"};function d(e,n,l,o,d,i){const r=(0,t.g2)("el-menu-item"),u=(0,t.g2)("el-menu"),s=(0,t.g2)("el-header"),c=(0,t.g2)("router-view"),p=(0,t.g2)("el-main"),m=(0,t.g2)("el-container");return(0,t.uX)(),(0,t.CE)("div",a,[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{mode:"horizontal","default-active":e.activeMenu},{default:(0,t.k6)((()=>[(0,t.bF)(r,{index:"1",onClick:n[0]||(n[0]=n=>e.navigateTo("endpoint"))},{default:(0,t.k6)((()=>n[3]||(n[3]=[(0,t.eW)("Endpoint")]))),_:1}),(0,t.bF)(r,{index:"2",onClick:n[1]||(n[1]=n=>e.navigateTo("node"))},{default:(0,t.k6)((()=>n[4]||(n[4]=[(0,t.eW)("Node")]))),_:1}),(0,t.bF)(r,{index:"3",onClick:n[2]||(n[2]=n=>e.navigateTo("query"))},{default:(0,t.k6)((()=>n[5]||(n[5]=[(0,t.eW)("Query")]))),_:1})])),_:1},8,["default-active"])])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1})])}l(4114);var i=l(1387),r=(0,t.pM)({name:"App",setup(){const e=(0,i.rd)(),n="1",l=n=>{e.push(`/${n}`)};return{activeMenu:n,navigateTo:l}}}),u=l(1241);const s=(0,u.A)(r,[["render",d]]);var c=s,p=l(5555);l(4188);const m={class:"header-container"};function b(e,n,l,o,a,d){const i=(0,t.g2)("el-button"),r=(0,t.g2)("el-table-column"),u=(0,t.g2)("el-table"),s=(0,t.g2)("el-input"),c=(0,t.g2)("el-form-item"),p=(0,t.g2)("el-form"),b=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("div",m,[n[9]||(n[9]=(0,t.Lk)("h1",null,"数据源视图",-1)),(0,t.bF)(i,{type:"primary",onClick:d.openAddEndpointDialog,class:"add-endpoint-btn"},{default:(0,t.k6)((()=>n[8]||(n[8]=[(0,t.eW)("接入数据源")]))),_:1},8,["onClick"])]),(0,t.bF)(u,{data:a.endpoints,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{prop:"id",label:"编号"}),(0,t.bF)(r,{prop:"description",label:"描述"}),(0,t.bF)(r,{prop:"addr",label:"地址"}),(0,t.bF)(r,{label:"Actions"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(i,{size:"small",onClick:n=>d.removeEndpoint(e)},{default:(0,t.k6)((()=>n[10]||(n[10]=[(0,t.eW)("Delete")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.bF)(b,{title:"添加数据源",modelValue:a.dialogVisible,"onUpdate:modelValue":n[7]||(n[7]=e=>a.dialogVisible=e),width:"400px",onClose:d.resetForm},{footer:(0,t.k6)((()=>[(0,t.bF)(i,{onClick:n[6]||(n[6]=e=>a.dialogVisible=!1)},{default:(0,t.k6)((()=>n[11]||(n[11]=[(0,t.eW)("Cancel")]))),_:1}),(0,t.bF)(i,{type:"primary",onClick:d.addNewEndpoint},{default:(0,t.k6)((()=>n[12]||(n[12]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{model:a.newEndpoint,ref:"form"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"编号",rules:[{required:!0,message:"Please input ID",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newEndpoint.id,"onUpdate:modelValue":n[0]||(n[0]=e=>a.newEndpoint.id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"描述",rules:[{required:!0,message:"Please input description",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newEndpoint.description,"onUpdate:modelValue":n[1]||(n[1]=e=>a.newEndpoint.description=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"地址",rules:[{required:!0,message:"Please input address",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newEndpoint.addr,"onUpdate:modelValue":n[2]||(n[2]=e=>a.newEndpoint.addr=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"版块",rules:[{required:!0,message:"Please input address",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newEndpoint.index.name,"onUpdate:modelValue":n[3]||(n[3]=e=>a.newEndpoint.index.name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"一级索引",rules:[{required:!0,message:"Please input address",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newEndpoint.index.l1,"onUpdate:modelValue":n[4]||(n[4]=e=>a.newEndpoint.index.l1=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"二级索引",rules:[{required:!0,message:"Please input address",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newEndpoint.index.l2,"onUpdate:modelValue":n[5]||(n[5]=e=>a.newEndpoint.index.l2=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])])}l(4603),l(7566),l(8721);var f=l(4373);const g=f.A.create({baseURL:"http://localhost:8000/admin",timeout:1e4,headers:{"Content-Type":"application/json"}}),h=()=>g.get("/node/list"),v=e=>g.post("/node/add",e),F=e=>g.post("/node/remove",e),k=()=>g.get("/endpoint/list"),w=e=>g.post("/endpoint/add",e),y=e=>g.post("/endpoint/remove",e),V=e=>{const n=new URLSearchParams;for(const l in e.index)e.index[l]&&n.append(`index.${l}`,e.index[l]);return g.get("/index/list",{params:n})};var _={name:"EndpointView",data(){return{endpoints:[],dialogVisible:!1,newEndpoint:{id:"",description:"",address:"",index:{name:"",l1:"",l2:"",leafname:""}}}},created(){this.fetchEndpoints()},methods:{async fetchEndpoints(){try{const e=await k();this.endpoints=e.data.endpoint}catch(e){this.$message.error("Failed to load endpoints")}},openAddEndpointDialog(){this.dialogVisible=!0},async addNewEndpoint(){try{const e=await w(this.newEndpoint);e?(this.dialogVisible=!1,this.resetForm(),this.fetchEndpoints()):this.$message.error("Failed to add endpoint")}catch(e){this.$message.error("Failed to add endpoint")}},async removeEndpoint(e){try{await y(e.index),this.fetchEndpoints()}catch(n){this.$message.error("Failed to remove endpoint")}},resetForm(){this.newEndpoint={id:"",description:"",addr:""}}}};const C=(0,u.A)(_,[["render",b],["__scopeId","data-v-173a7e68"]]);var E=C;const x={class:"header-container"};function N(e,n,l,o,a,d){const i=(0,t.g2)("el-button"),r=(0,t.g2)("el-table-column"),u=(0,t.g2)("el-table"),s=(0,t.g2)("el-input"),c=(0,t.g2)("el-form-item"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("div",x,[n[6]||(n[6]=(0,t.Lk)("h1",null,"节点管理",-1)),(0,t.bF)(i,{type:"primary",onClick:d.openAddNodeDialog},{default:(0,t.k6)((()=>n[5]||(n[5]=[(0,t.eW)("接入节点")]))),_:1},8,["onClick"])]),(0,t.bF)(u,{data:a.nodes,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{prop:"id",label:"编号"}),(0,t.bF)(r,{prop:"name",label:"名称"}),(0,t.bF)(r,{prop:"status",label:"状态"}),(0,t.bF)(r,{prop:"addr",label:"地址"}),(0,t.bF)(r,{label:"Actions"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(i,{size:"small",onClick:n=>d.removeNode(e)},{default:(0,t.k6)((()=>n[7]||(n[7]=[(0,t.eW)("Delete")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.bF)(m,{title:"Add New Node",modelValue:a.dialogVisible,"onUpdate:modelValue":n[4]||(n[4]=e=>a.dialogVisible=e),width:"400px",onClose:d.resetForm},{footer:(0,t.k6)((()=>[(0,t.bF)(i,{onClick:n[3]||(n[3]=e=>a.dialogVisible=!1)},{default:(0,t.k6)((()=>n[8]||(n[8]=[(0,t.eW)("Cancel")]))),_:1}),(0,t.bF)(i,{type:"primary",onClick:d.addNewNode},{default:(0,t.k6)((()=>n[9]||(n[9]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{model:a.newNode,ref:"form"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"ID",rules:[{required:!0,message:"Please input ID",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newNode.node.id,"onUpdate:modelValue":n[0]||(n[0]=e=>a.newNode.node.id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"Name",rules:[{required:!0,message:"Please input name",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newNode.node.name,"onUpdate:modelValue":n[1]||(n[1]=e=>a.newNode.node.name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"Address",rules:[{required:!0,message:"Please input address",trigger:"blur"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:a.newNode.node.addr,"onUpdate:modelValue":n[2]||(n[2]=e=>a.newNode.node.addr=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])])}var O={name:"NodeView",data(){return{nodes:[],dialogVisible:!1,newNode:{node:{id:"",name:"",addr:"",status:""}}}},created(){this.fetchNodes()},methods:{async fetchNodes(){try{const e=await h();this.nodes=e.data.node}catch(e){this.$message.error("Failed to load nodes")}},openAddNodeDialog(){this.dialogVisible=!0},async addNewNode(){try{await v(this.newNode),this.dialogVisible=!1,this.resetForm(),this.fetchNodes()}catch(e){this.$message.error("Failed to add node")}},async removeNode(e){try{await F(e),this.fetchNodes()}catch(n){this.$message.error("Failed to remove node")}},resetForm(){this.newNode={node:{id:"",name:"",addr:""}}}}};const A=(0,u.A)(O,[["render",N],["__scopeId","data-v-09dec262"]]);var L=A;function U(e,n,l,o,a,d){const i=(0,t.g2)("el-option"),r=(0,t.g2)("el-select"),u=(0,t.g2)("el-col"),s=(0,t.g2)("el-row"),c=(0,t.g2)("el-table-column"),p=(0,t.g2)("el-button"),m=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",null,[n[4]||(n[4]=(0,t.Lk)("div",{class:"header-container"},[(0,t.Lk)("h1",null,"数据查询")],-1)),(0,t.bF)(s,{gutter:20},{default:(0,t.k6)((()=>[(0,t.bF)(u,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:o.selectedOption1,"onUpdate:modelValue":n[0]||(n[0]=e=>o.selectedOption1=e),placeholder:"请选择数据板块",onChange:e.fetchOptions2},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.options1,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(u,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:o.selectedOption2,"onUpdate:modelValue":n[1]||(n[1]=e=>o.selectedOption2=e),placeholder:"请选择索引",onChange:e.fetchOptions3},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.options2,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(u,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:o.selectedOption3,"onUpdate:modelValue":n[2]||(n[2]=e=>o.selectedOption3=e),placeholder:"请选择索引",onChange:o.fetchData},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.options3,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),o.records.length?((0,t.uX)(),(0,t.Wv)(m,{key:0,data:o.records,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"name",label:"Record Name"}),(0,t.bF)(c,{label:"Action",width:"180"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(p,{onClick:n=>o.downloadRecord(e.id),type:"primary",size:"small"},{default:(0,t.k6)((()=>n[3]||(n[3]=[(0,t.eW)("Download")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):(0,t.Q3)("",!0)])}var W=l(144),P={setup(){const e=(0,W.KR)(""),n=(0,W.KR)(""),l=(0,W.KR)(""),o=(0,W.KR)([]),a=(0,W.KR)([]),d=(0,W.KR)([]),i=(0,W.KR)([]),r=async()=>{try{const n={index:{name:"",L1:"",L2:"",leafname:""}};console.log(n);const l=await V(n);o.value=l.data.index,o.value.length>0&&(e.value=o.value[0],u())}catch(n){console.error("Failed to fetch options1",n)}},u=async()=>{if(e.value)try{const l={index:{name:e.value,L1:"",L2:"",leafname:""}};console.log(l);const o=await V(l);a.value=o.data.index,a.value.length>0&&(n.value=a.value[0],s())}catch(l){console.error("Failed to fetch options2",l)}},s=async()=>{if(e.value&&n.value)try{const o={index:{name:e.value,L1:n.value,L2:"",leafname:""}};console.log(o);const t=await V(o);d.value=t.data.index,d.value.length>0&&(l.value=d.value[0],c())}catch(o){console.error("Failed to fetch options3",o)}},c=async()=>{if(e.value&&n.value&&l.value)try{const o={index:{name:e.value,L1:n.value,L2:l.value,leafname:""}};console.log(o);const t=await V(o);i.value=t.data.index}catch(o){console.error("Failed to fetch records",o)}else i.value=[]},p=e=>{console.log("Downloading record",e)};return(0,t.sV)((()=>{r()})),(0,t.wB)(e,(()=>{u()})),(0,t.wB)(n,(()=>{s()})),{selectedOption1:e,selectedOption2:n,selectedOption3:l,options1:o,options2:a,options3:d,records:i,fetchData:c,downloadRecord:p}}};const D=(0,u.A)(P,[["render",U],["__scopeId","data-v-2bd687fa"]]);var R=D;const j=[{path:"/endpoint",name:"Endpoint",component:E},{path:"/node",name:"Node",component:L},{path:"/query",name:"Query",component:R},{path:"/",redirect:"/endpoint"}],q=(0,i.aE)({history:(0,i.LA)(),routes:j});var X=q;const K=(0,o.Ef)(c);K.use(X),K.use(p.A),K.mount("#app")}},n={};function l(o){var t=n[o];if(void 0!==t)return t.exports;var a=n[o]={exports:{}};return e[o].call(a.exports,a,a.exports,l),a.exports}l.m=e,function(){var e=[];l.O=function(n,o,t,a){if(!o){var d=1/0;for(s=0;s<e.length;s++){o=e[s][0],t=e[s][1],a=e[s][2];for(var i=!0,r=0;r<o.length;r++)(!1&a||d>=a)&&Object.keys(l.O).every((function(e){return l.O[e](o[r])}))?o.splice(r--,1):(i=!1,a<d&&(d=a));if(i){e.splice(s--,1);var u=t();void 0!==u&&(n=u)}}return n}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[o,t,a]}}(),function(){l.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(n,{a:n}),n}}(),function(){l.d=function(e,n){for(var o in n)l.o(n,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};l.O.j=function(n){return 0===e[n]};var n=function(n,o){var t,a,d=o[0],i=o[1],r=o[2],u=0;if(d.some((function(n){return 0!==e[n]}))){for(t in i)l.o(i,t)&&(l.m[t]=i[t]);if(r)var s=r(l)}for(n&&n(o);u<d.length;u++)a=d[u],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(s)},o=self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=l.O(void 0,[504],(function(){return l(480)}));o=l.O(o)})();
//# sourceMappingURL=app.12d6ecc8.js.map